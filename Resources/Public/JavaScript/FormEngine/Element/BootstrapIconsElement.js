/**
 * Package: typo3-extension-bootstrap - Version 1.0.13
 * Typo3 template extension with Twitter Bootstrap 5 package.
 * Author: Marcel <mb@lbrmedia.de>
 * Build date: 2022-03-04 08:27:17
 * Copyright (c) 2022 LBRmedia
 * Released under the GPL-2.0-or-later license
 * https://github.com/lbr-media/typo3-extension-bootstrap
 */

define((function(){return class{constructor(t,e){let n=this;this.configurations=JSON.parse(e),this.currentConfiguration=null,this.icons=[],this.currentIconSet="",this.currentValue="",this.currentPosition="",this.currentSize="",this.currentColor="",this.userControlFieldValue=document.getElementById(t+"-hidden"),this.userControlIconSet=document.getElementById(t+"-iconset"),this.userControlValue=document.getElementById(t+"-value"),this.userControlPosition=document.getElementById(t+"-position"),this.userControlSize=document.getElementById(t+"-size"),this.userControlColor=document.getElementById(t+"-color"),this.userControlFilter=document.getElementById(t+"-filter"),this.iconsContainer=document.getElementById(t+"-container"),this.previewContainer=document.getElementById(t+"-icon-preview"),this.removeButton=document.getElementById(t+"-remove"),this.removeButton.addEventListener("click",(function(){n.currentValue="",n.updateValues()})),this.userControlIconSet.addEventListener("change",(function(){n.currentIconSet=n.userControlIconSet.value,n.initIconSet()})),this.userControlPosition&&this.userControlPosition.addEventListener("change",(function(){n.currentPosition=n.userControlPosition.value,n.updateValues()})),this.userControlSize&&this.userControlSize.addEventListener("change",(function(){n.currentSize=n.userControlSize.value,n.updateValues()})),this.userControlColor&&this.userControlColor.addEventListener("change",(function(){n.currentColor=n.userControlColor.value,n.updateValues()})),this.initValues()}initValues(){const t=this.userControlFieldValue.value?this.userControlFieldValue.value.split(";"):["","","","",""];this.currentIconSet="string"==typeof t[0]&&"default"!==t[0]?t[0]:"",this.currentValue="string"==typeof t[1]&&"default"!==t[1]?t[1]:"",this.currentPosition="string"==typeof t[2]&&"default"!==t[2]?t[2]:"",this.currentSize="string"==typeof t[3]&&"default"!==t[3]?t[3]:"",this.currentColor="string"==typeof t[4]&&"default"!==t[4]?t[4]:"",this.currentIconSet||"string"==typeof this.configurations[0].key&&(this.currentIconSet=this.configurations[0].key,this.userControlIconSet.value=this.currentIconSet),this.currentValue&&(this.userControlValue.value=this.currentValue,this.createPreviewIcon()),this.currentPosition&&this.userControlPosition&&(this.userControlPosition.value=this.currentPosition),this.currentSize&&this.userControlSize&&(this.userControlSize.value=this.currentSize),this.currentColor&&this.userControlColor&&(this.userControlColor.value=this.currentColor),this.initIconSet()}updateValues(){this.userControlValue.value=this.currentValue,this.userControlFieldValue.value=this.currentIconSet+";"+this.currentValue+";"+this.currentPosition+";"+this.currentSize+";"+this.currentColor,this.createPreviewIcon()}initCurrentConfiguration(){this.currentConfiguration=null;for(let t=0;t<this.configurations.length;t++)if(this.configurations[t].key===this.currentIconSet){this.currentConfiguration=this.configurations[t];break}}initIconSet(){if(this.initCurrentConfiguration(),!this.currentConfiguration)return void console.warn(`BootstrapIconsElement: Could not find a configuration for key ${this.currentIconSet}`);for(const t in this.currentConfiguration.includeCss)this.loadStylesheet(this.currentConfiguration.includeCss[t]);this.iconsContainer.innerHTML="loading";let t=this;this.loadContainerHtml(this.currentConfiguration.includeHtml).then((function(e){t.iconsContainer.innerHTML=e,t.initFilter()}))}loadStylesheet(t){const e=document.querySelectorAll("link");for(let n=0;n<e.length;n++)if(e[n].hasAttribute("href")&&e[n].getAttribute("href")===t)return;let n=document.createElement("link");n.href=t,n.type="text/css",n.rel="stylesheet",n.media="all",document.getElementsByTagName("head")[0].appendChild(n)}loadContainerHtml(t){return new Promise((function(e,n){let i=new XMLHttpRequest;i.open("GET",t,!0),i.onload=function(t){4===i.readyState&&(200===i.status?e(i.response):(n(i),console.error(i.statusText)))},i.send()}))}initFilter(){let t=this;if(this.icons=[],"bsicons"===this.currentConfiguration.key){let n=this.iconsContainer.querySelectorAll(".bs-icon");for(var e=0;e<n.length;e++){let i=[],r="";const o=n[e].querySelector(".bs-label");o&&i.push(o.innerHTML.toLowerCase());const s=n[e].querySelector(".bi");s&&(r=s.getAttribute("class").replace("bi ",""),i.push(r.toLowerCase())),i.length&&r&&(this.icons.push({iconElement:n[e],search:i.join(" "),value:r}),n[e].setAttribute("data-bsicon-value",r),n[e].addEventListener("click",(function(e){const n=this.getAttribute("data-bsicon-value");n&&(t.currentValue=n,t.updateValues())})))}}this.userControlFilter.addEventListener("keydown",(function(){const e=t.userControlFilter.value.toLowerCase();if(e.trim())for(let n=0;n<t.icons.length;n++)t.icons[n].search.indexOf(e)>-1?t.icons[n].iconElement.style.display="inline-block":t.icons[n].iconElement.style.display="none";else for(let e=0;e<t.icons.length;e++)t.icons[e].iconElement.style.display="inline-block"}))}createPreviewIcon(){if(this.previewContainer.innerHTML="â€“",this.currentValue&&this.currentIconSet&&"bsicons"===this.currentIconSet){this.previewContainer.innerHTML="";var t=document.createElement("i");t.setAttribute("class","bs "+this.currentValue),this.previewContainer.appendChild(t)}}}}));